A rapid density method for taxi passengers hot spot recognition and visualization based on DBSCAN+
#https://www.nature.com/articles/s41598-021-88822-3
With the development of city size and vehicle interconnection, visual analysis technology is playing a very important role in the course of city calculation and city perception. A Reasonable visual model can effectively present the feature of city. In order to solve the problem of traditional density algorithm that cluster the large scale data slowly and cannot find cluster centers to adapt taxi track data. The DBSCAN+ (density-based spatial clustering of applications with noise plus) algorithm that can split data and extract maximum density clusters under the large scale data was proposed in the paper. The passenger points should be cleaned from the original point of the passenger trajectory data firstly, and then the massive passenger points are sliced and clustered cyclically. In the clustering process, the cluster centers can be extracted based on maximum density, and finally the clustering results are visualized according to the results. The experimental results show that compared with other popular methods, the proposed method has significant advantages in clustering speed, precision and visualization for large-scale city passenger hotspots. Moreover, it provides important decisions for further urban planning and promotes the traffic efficiency.
With the development of urban traffic, visual analysis technology plays an important role in the analysis process of urban traffic hot spots. Taxi is not available during peak hours, and usage during off-peak hours is low. This taxi imbalance problem can be resolved by analyzing the spatial data and predicting the demand hotspots to identify areas with potential passengers1,2. The discovery of hot spots can bring tremendous benefits to drivers and passengers3,4. Luo et al. put forward a visual analysis method for urban roads5. More cities have established taxi stands to advocate and to guide passengers to hail a taxi. However, most of taxi stands have low rate of usage6. Building a reasonable visual model can effectively display the spatial and temporal distribution characteristics of urban hot spots. The formation of hotspots is strongly correlated with many features, i.e., time, space, and the distribution of points of interest7. Detailed urban land social function identification is an integral part of urban planning8. It also can provide important decision information for urban planning and so on.
DBSCAN is the most popular clustering method based on density. Kumar et al. proposed a fast DBSCAN clustering algorithm9 which uses group method to accelerate neighborhood search. The traditional DBSCAN algorithm has some limitations in clustering mass taxi traffic track data points, such as being unable to adapt to large-scale data, unable to identify cluster centers, and slow and single thread clustering speed process.
Among the existing techniques, there are five ways to visualize taxi hot spots based on DBSCAN traffic data:
Icon-based visualization: The GBADBSCAN algorithm10 used icons to represent passenger hotspots in data visualization.
Color features visualization: For example, the LCS-BASED DBSCAN clustering algorithm11 used different colors to distinguish in the visualization of passenger hot spots.
Time-axis features visualization: For example, Zhao et al. proposed a time-axis based passenger hot spot area12, and used different colors to mark the passenger hot spot area in different time periods.
By dividing grid cells: DBSCAN algorithm based on network constraints13 and Zheng14 proposed a grid-based k-means traffic hot area recognition algorithm, while Zhou et al. proposed a clustering model15 for detecting track points using the potential threshold method of data field to extract hot spots, Kong et al.16 filled different areas with different colors to display the interactive intensity of this target area, showing the number of taxi trips from different areas (grid) to major hospitals in Beijing. Wang R segments road network into several road clusters and use ranking-based extreme learning machine (ELM) model to evaluate the passenger-finding potential of each road cluster17.
By processing image: Liu D et al. proposed a solution that projects all points to a density image and execute variant of the DPC algorithm on the processed image18.
These algorithms improved DBSCAN, whether based on icon-based visualization, color feature visualization, time-axis feature visualization or grid-based partitioning, all achieve certain clustering results in the cluster hotspot region and match the clustering results on the map in a certain way. However, the existing DBSCAN improved algorithm is not efficient in processing big data, and the clustering accuracy is insufficient. In the visualization technology, hot spots or sections are not displayed on the map according to the thermal size, and the thermal relationship between hot spots cannot be judged intuitively.
The DBSCAN+ based taxi passenger hot spot visualization method is proposed in this paper. Compared with existing technologies, cluster centers are introduced into the traditional DBSCAN algorithm to identify cluster centers. Parallel computing and fractal dimension reduction processing can adapt to large-scale data and cluster quickly. It overcomes the problem that the existing technology cannot adapt to mass data and lack of precision in the extraction of hot spots for taxi passengers19. In terms of visualization effect, the method presented in this paper can directly and effectively show the passenger carrying heat capacity of each region of the city. The actual geographic location table of passenger hot spots after the heat output is refined. It overcomes the problem that mass clustering hot spots are not visualized directly on the map and are not easy to make decisions. Then, relevant departments can make decisions on taxi operation and dispatch according to the degree of aggregation in each hot area and help taxi drivers to find hot spots and wait for passengers more quickly. It is also great significance to optimize the spatial allocation of public facilities and rationally allocate public resources to alleviate traffic pressure. In addition, taxi passenger hot–spots recognition can also contribute to identify a location in each cluster as a candidate bus taxi stands and bus stop or address the problem of night-bus stop planning by investigating the characteristics of taxi GPS trajectories and transactions20,21,22. The trajectory data provides us with a unique new perspective to discover and understand human behavior patterns and potential intelligence in various situations and determine the functions of the hot-spot regions23,24.
In the process of DBSCAN+ clustering, after the number of cluster centers CCList.Count satisfies the iterative termination condition, it traverses all the track points in the last track point queue, Through the cluster IDs of various clusters, the number of sample points in each cluster is counted separately, and the cluster aggregation degree Value corresponding to the cluster core is obtained. The ArcGIS 9.3 tool28 was used to generate the map. Based on the distribution density of the data, the tool dynamically renders the heat map of the point data by setting the search radius and weight field.
The above-mentioned various cluster aggregation degree Value represents the heat of the passenger hotspot area in the visualization method. In thermal visualization, the color index of the highlighted area reflects the thermal power. The hotspots of each passenger area in the color highlight area are highlighted through setting the global maximum thermal value MaxValue, the thermal threshold ranges from 0 to MaxValue in this model. Because the data in the Value queue is not balanced, there may be a phenomenon that the maximum value is far beyond the multiple high-level aggregation areas. For example, if MaxValue is directly set to this value, the heat map effect cannot be scientifically presented, as shown in Fig. 6.
The original thermal diagram28.
Through K-Means++ algorithm, clustering the number of cluster sample points again, the maximum value are selected as the global maximum decision threshold of the heat map in the cluster center result, which can improve the generalization ability of the heat map model, correctly reflect multiple passenger hotspots in the city, and at the same time, even if the heat value of the low heat passenger area is low, the visualization effect is better. Here, the clustering effect is similar to filtering. By setting the parameters of each hot zone by combining various cluster cores and clusters of clusters, finally the heat map of the city is rendered to achieve the visual effect. The effect of thermal diagram is shown in Fig. 7.
The optimized thermal diagram28.
In order to facilitate the viewing of the study, the real geographical location of the passenger hotspot area is output. The cluster center is transformed from WGS-84 to GCJ-02 coordinate system29, and then from the cluster center set of GCJ-02 coordinate system to the corresponding real geographic location data set. Through POI (Point of Interest) reverse address analysis and combined with the thermal value of each passenger hot spot, the list of geographic information is output to Excel table. It can realize the transformation of data from latitude and longitude information to structured address information. for example: “lat: 33.600372, LNG: 119.045813” the result of inverse address analysis is “Wanda Plaza, 169 Xiangyu Middle Road, Qinjiangpu, Huai’an”. Exporting information can facilitate the relevant departments to make scheduling decisions and help drivers search for passengers faster in taxis.
The experimental environment in this paper is a PC with Intel(R) Core(TM) i7-4700MQ CPU and 8 GB DDR3 1600 memory. Experimental data are from the taxi GPS data trajectory resources of Huai’an city from 2017 to 2018.
This paper experiments with the following density clustering algorithm for time complexity comparison. The original DBSCAN algorithm. TN-DBSCAN proposed by Wang Yafei30. GBA-DBSCAN proposed by Zhao10. Liu Chang et al.31 proposed Slice-DBSCAN by dividing the time slice. In most practical applications, machine learning systems must handle millions of users and billions of events. Therefore, as more and more users and events are added to the system, a well-designed data processing channel needs to be fast and scalable. This requires distributed computing. As far as our goal is concerned, Spark is a good choice as a distributed processing engine because it provides a computing framework that can execute many clustering tasks based on geolocation in parallel on multiple machines. Jindu et al.32 proposed a spatial data mining DBSCAN parallel clustering algorithm based on Spark platform.
Based on what the paper mentioned earlier, the density-based clustering algorithm parameters are set the same, the minimum scanning radius is set to 30 m, and the minimum number of cluster points is set to 3. Observe the performance comparison of different density clustering algorithms.
The classic DBSCAN algorithm needs to traverse each sample point in the database during execution and perform an extended cluster operation on each sample point. In the extended cluster process, the neighborhood of the sample points needs to be scanned, so all points are traversed. The basic time complexity of the DBSCAN algorithm is O(n2).
The TN-DBSCAN algorithm uses the time dimension information in the clustering process to consider only the internal hotspots of the sliding window. Therefore, it reduces the number of original sample points to reduce the clustering time. The time complexity is still O(n2).
Based on GPS data, the improved GBA-DBSCAN in the clustering method for urban frequent congestion area identification, by dividing the urban area, defines the congestion frequency parameters for every other grid and accordingly identifies the frequently-occurring congestion area. The clustering problem is transformed into a grid, so that the original data set is reduced in dimension, thereby reducing the clustering time. Therefore, the time complexity of the algorithm itself is O(n2).
Based on the time slice division, Slice-DBSCAN reduces the number of data sets by taking snapshots of time segments and finds the congestion area by the density of taxis. The time complexity is the same as above.
The spatial data mining DBSCAN parallel clustering algorithm based on Spark platform is realized by parallel algorithm of single-node Spark platform, and then optimized from data transmission and serialization, and finally realizes cluster mode under Docker virtualization technology. Distributed clustering.
The DBSCAN+ algorithm adopts the scheme of first parallel clustering and then clustering the results again. Therefore, it can be understood that the local time complexity is O(n2). As the number of original sample points increases, the global time complexity becomes linear, so the time complexity is O(n). The DBSCAN+ algorithm partially uses the classic DBSCAN algorithm, so the data is divided into blocks and clustered in parallel. The local time complexity is O(n), and the overall time complexity is O(n2). It solves the problem of exponential increase in clustering time as the data increases.
Experiments show that the multi-threaded block-cycle clustering scheme reduces the time complexity of the algorithm from the exponential relationship of O(n2) to the linear relationship of O(n), which greatly shortens the clustering time of large-scale data. After several experiments, the average time is as shown in Table 2.

In order to compare the clustering effects of different clustering algorithms, the DBI indicator was introduced. The Davies–Bouldin index (DBI), also known as the classification accuracy indicator, is an indicator proposed by David L. Davis and Donald Bouldin to evaluate the pros and cons of clustering algorithms. The DBI index is the ratio of the sum of the distances in the class to the distance outside the class and in order to evaluate the quality of the clustering. The goal is to ensure that the samples between each cluster are as close as possible and that the distance between samples of different clusters is as far as possible. Therefore, the smaller the DBI index, the better the clustering effect. The DBI index is calculated using the following formula:
Si calculates the average distance from the intra-class data to the centroid of the cluster, representing the degree of dispersion between the samples within the cluster. ||wi -wj||2 represents the distance between the centroid of cluster class i and cluster class j. N represents the number of clusters.
The DBSCAN+ algorithm takes the centroid according to the principle of maximum density, which is different from the latitude and longitude of other algorithms. Block-wise parallel clustering results in a more even distribution of clusters than global clustering. Under the same environmental parameters, experiments show that DBSCAN+ algorithm clustering effect is superior to other similar clustering algorithms according to DBI index, which has advantages. The results are shown in Table 3. Marks et al.33 proposed Iterative DBSCAN (I-DBSCAN), which is an extension of the Density Based Spatial Clustering of Applications with Noise algorithm. POI-DBSCAN proposed by Mo34. In order to further evaluate the effectiveness of the algorithm, this paper and the above methods conducts experiments on the F-measure, Accuracy, and Purity indicators of the algorithm, the results are shown in Table 4.
The result of the DBSCAN clustering algorithm is represented as a cluster of classes. Therefore, the hot spot shows an area on the map instead of the exact location. Even in hot spots, clustering results can cover the entire street. Using ArcGIS tool to import the data processed by DBSCAN+ algorithm and setting the centroid parameter, the effect is shown in Fig. 8. The visualization effect is more intuitive than the traditional algorithm, and it can specifically display the position represented by the centroid of the cluster.
The diagram of passenger hotspot map28.
Through the two visualized effects proposed in this paper based on DBSCAN+ algorithm, the heat carrying capacity of passengers in various regions of the city is presented intuitively and effectively. Combined with the thermal output precision of the passenger hot spot actual geographical location table, it overcomes the problem that the direct visualization of mass clustering hotspots on the map is not intuitive and is not easy to make decisions. In order to avoid the false death of the program caused by large data volume, slow network transmission, and other factors, the experiment tries to achieve high cohesion and low coupling of each module as far as possible. The threads of each module run independently and do not interfere with each other. Relevant ideas of software engineering were used to improve the availability and robustness of the programs. Selecting the symbol system in the ArcGIS tool, and performing heat map symbol rendering on the imported data. The effect is shown in Fig. 9. The DBSCAN+ algorithm is used to visualize the clustering heat map of Huai’an car-hire hot spots.
The diagram of thermal diagram visualization effect28.
Similarly, different application scenarios are applied through the visualization of different thermal force models. Based on the clustering algorithm of DBSCAN+, the results of the passenger hot spots of a taxi in Huai’an city are shown through the honeycomb thermal diagram. Selecting the symbol system in the ArcGIS tool, and performing honeycomb map rendering on the imported data, and the results are shown in Fig. 10. Through the passenger hot spot density, the size of the customized area is set in the cellular heat map to facilitate the analysis of the number of business circles and administrative areas in the honeycomb with different passenger density, so as to be used in the decision-making of logistics optimization and precision marketing.
The diagram of Honeycomb heat diagram visualized effect28.
Cylindrical three-dimensional honeycomb heat diagram shows the passenger density by the cylindrical height, which has a good illustration effect. The thermodynamic chart model is strengthened on the honeycomb thermodynamic chart, and the density color can be set to adjust the column radius, gap between columns and the maximum height of the column to show the passenger density in a three-dimensional manner, which also has all the advantages of the honeycomb thermal force. Selecting the symbol system in the ArcGIS tool, and performing histogram map rendering on the imported data, the visualization effect is shown in Fig. 11.
The visualization effect diagram of three-dimensional cylindrical honeycomb thermal diagram28.
The experiment also can use POI reverse address resolution to show the detailed geographical location and aggregation degree output of Huai’an car-hire hot spot clustering based on DBSCAN+ algorithm. The physical location text output can be employed to quantify the passenger density in different areas from the data, thus providing data support for the corresponding research.
